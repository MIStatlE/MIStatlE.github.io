<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIStatlE | Math & Intelligence</title>
    <meta name="description" content="Bridging the gap between Abstract Theory & Concrete Reality.">
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Inter:wght@300;400;500;600&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">

    <style>
        :root {
            --font-serif: 'Cinzel', serif;
            --font-sans: 'Inter', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
            --bg-color: #f8fafc;
            --grid-color: rgba(148, 163, 184, 0.15);
        }
        body {
            font-family: var(--font-sans);
            background-color: var(--bg-color);
            color: #0f172a;
            /* 科技感点阵背景 */
            background-image: radial-gradient(var(--grid-color) 1px, transparent 1px);
            background-size: 24px 24px;
        }
        
        h1, h2, h3, h4, .serif { font-family: var(--font-serif); }
        .mono { font-family: var(--font-mono); }
        
        /* 动画 */
        .fade-in { animation: fadeIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; opacity: 0; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .glass-nav {
            background: rgba(248, 250, 252, 0.85);
            backdrop-filter: blur(16px);
            border-bottom: 1px solid rgba(0,0,0,0.05);
        }
        
        /* 科技感边框系统 */
        .tech-border {
            position: relative;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        .tech-border:hover {
            border-color: #94a3b8;
            box-shadow: 0 4px 20px -5px rgba(15, 23, 42, 0.08);
        }
        /* 角标装饰 */
        .tech-corner::after {
            content: '';
            position: absolute;
            top: -1px;
            right: -1px;
            width: 8px;
            height: 8px;
            border-top: 2px solid #0f172a;
            border-right: 2px solid #0f172a;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .tech-border:hover .tech-corner::after { opacity: 1; }

        /* 雷达波纹动画 (Community) */
        @keyframes radar-ping {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(2.5); opacity: 0; }
        }
        .radar-circle {
            animation: radar-ping 3s cubic-bezier(0, 0, 0.2, 1) infinite;
        }

        /* 滚动条 */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 2px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- 完整默认数据 (Full Data Backup) ---
        const DEFAULT_DB = {
            library: {
                disciplines: [
                    { id: "dl", title: "Deep Learning", code: "AI-101", icon: "brain-circuit", desc: "From Backprop to Transformers.", count: "2 Modules" },
                    { id: "prob", title: "Probability", code: "MA-202", icon: "sigma", desc: "Stochastic Processes & Bayes.", count: "3 Modules" },
                    { id: "opt", title: "Optimization", code: "MA-305", icon: "activity", desc: "Convex & Non-convex Geometry.", count: "1 Module" },
                    { id: "math", title: "Foundations", code: "MA-001", icon: "infinity", desc: "Linear Algebra & Calculus.", count: "4 Modules" }
                ],
                courses: {
                    "dl": [{ 
                        title: "Diffusion Models: Theory to Practice", 
                        code: "DL-DIFF-01", 
                        chapters: [
                            { 
                                title: "Phase I: Foundations", 
                                lessons: [
                                    { id: "diff_01", title: "VAE & ELBO Derivation", type: "note", highlight: true, filePath: "" },
                                    { id: "diff_02", title: "Gaussian Transition Kernels", type: "note", filePath: "" }
                                ] 
                            },
                            { 
                                title: "Phase II: Score Matching", 
                                lessons: [
                                    { id: "diff_03", title: "Langevin Dynamics", type: "note", highlight: true, filePath: "" }
                                ] 
                            }
                        ] 
                    }],
                    "prob": [{
                        title: "Information Theory",
                        code: "MA-PROB-02",
                        chapters: [{ title: "Entropy", lessons: [{ id: "ent_01", title: "Shannon Entropy", type: "note" }] }]
                    }]
                }
            },
            papers: {
                themes: [
                    { id: "gen-ai", title: "Generative AI", count: 12, desc: "SDEs, Diffusion, Flows" },
                    { id: "opt", title: "Optimization", count: 8, desc: "Gradient Dynamics" },
                    { id: "llm", title: "Large Models", count: 5, desc: "Attention & Scaling Laws" }
                ],
                lists: {
                    "gen-ai": [
                        { title: "Denoising Diffusion Probabilistic Models", authors: "Ho et al., 2020", tags: ["Foundation", "SOTA"], filePath: "" },
                        { title: "Score-Based Generative Modeling through SDEs", authors: "Song et al., 2021", tags: ["Theory", "Math"], filePath: "" },
                        { title: "Classifier-Free Diffusion Guidance", authors: "Ho & Salimans, 2022", tags: ["Technique"], filePath: "" }
                    ],
                    "opt": [
                        { title: "Adam: A Method for Stochastic Optimization", authors: "Kingma & Ba, 2014", tags: ["Classic"], filePath: "" }
                    ],
                     "llm": []
                }
            },
            lab: [
                { id: "micro-diff", language: "PYTHON", title: "micro-diffusion", version: "v0.1.0", desc: "Minimal implementation of DDPM in 200 lines. Pure PyTorch.", link: "#", status: "stable" },
                { id: "bayes-opt", language: "MATLAB", title: "BayesViz", version: "v1.2.beta", desc: "Interactive Gaussian Process visualization tool for teaching.", link: "#", status: "beta" },
                { id: "tensor-flow", language: "RUST", title: "Tensor-rs", version: "v0.0.1", desc: "Experimental tensor library written in Rust from scratch.", link: "#", status: "dev" }
            ],
            posts: [
                { 
                    id: "math-intuition", 
                    date: "2025-11-10", 
                    category: "Philosophy", 
                    title: "在数学的严谨与直觉之间", 
                    desc: "为什么伟大的数学发现往往源于直觉，而非逻辑推导？探讨 Poincaré 与 Riemann 的思维模式。", 
                    readTime: "8 min",
                    featured: true,
                    filePath: "data/posts/math_intuition.md",
                    tags: ["Epistemology"]
                },
                { 
                    id: "why-entropy", 
                    date: "2025-10-24", 
                    category: "Info Theory", 
                    title: "熵：不仅仅是混乱度", 
                    desc: "重新审视香农熵与热力学熵的本质联系，以及它们在现代大模型中的映射。",
                    readTime: "12 min", 
                    featured: false,
                    filePath: "",
                    tags: ["Physics", "AI"]
                },
                { 
                    id: "manifold", 
                    date: "2025-09-15", 
                    category: "Geometry", 
                    title: "流形假设：AI 学习的几何本质", 
                    desc: "高维数据真的分布在低维流形上吗？从拓扑学视角看深度学习的泛化能力。",
                    readTime: "15 min", 
                    featured: false,
                    filePath: "",
                    tags: ["Topology", "Deep Learning"]
                }
            ],
            tools: [
                { id: "zotero", icon: "book-marked", title: "Zotero Workflow", category: "Research", desc: "My configuration for academic knowledge management.", link: "https://www.zotero.org/" },
                { id: "cursor", icon: "terminal", title: "Cursor AI", category: "Coding", desc: "Setup guide for AI-assisted programming.", link: "https://cursor.sh/" },
                { id: "arxiv", icon: "file-text", title: "arXiv Sanity", category: "Source", desc: "Filtering noise from daily paper streams.", link: "http://www.arxiv-sanity.com/" },
                { id: "obsidian", icon: "pen-tool", title: "Obsidian Vault", category: "Writing", desc: "Template for mathematical note-taking (LaTeX enabled).", link: "https://obsidian.md/" }
            ]
        };

        const Icon = ({ name, size = 20, className, ...props }) => {
            const iconRef = useRef(null);
            useEffect(() => {
                if (window.lucide) window.lucide.createIcons({
                    root: iconRef.current ? iconRef.current.parentNode : document,
                    nameAttr: 'data-lucide', attrs: { width: size, height: size, class: className || '' }
                });
            }, [name, size, className]);
            return <i ref={iconRef} data-lucide={name} className={className} {...props}></i>;
        };

        // --- Logo: 精密几何 ---
        const Logo = () => (
          <div className="flex items-center gap-3 select-none group cursor-pointer">
            <div className="w-9 h-9 relative text-slate-900">
                <svg viewBox="0 0 100 100" className="w-full h-full group-hover:text-blue-600 transition-colors duration-300">
                    <rect x="5" y="5" width="90" height="90" fill="none" stroke="currentColor" strokeWidth="2" />
                    <circle cx="50" cy="50" r="30" fill="none" stroke="currentColor" strokeWidth="1" strokeDasharray="4 2" className="opacity-50" />
                    <path d="M 20 80 L 50 30 L 80 80" fill="none" stroke="currentColor" strokeWidth="2" strokeLinejoin="round" />
                    <circle cx="50" cy="30" r="3" fill="currentColor" />
                    <circle cx="20" cy="80" r="3" fill="currentColor" />
                    <circle cx="80" cy="80" r="3" fill="currentColor" />
                </svg>
            </div>
            <div className="flex flex-col justify-center">
                <div className="font-serif text-lg font-bold tracking-widest text-slate-900 leading-none">
                    MI<span className="font-sans font-light opacity-60">StatlE</span>
                </div>
            </div>
          </div>
        );

        // --- Navbar ---
        const Navbar = ({ activeTab, setActiveTab }) => (
          <nav className="sticky top-0 z-50 glass-nav">
            <div className="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
              <div onClick={() => setActiveTab('home')}><Logo /></div>
              <div className="hidden lg:flex items-center gap-1">
                {['library', 'papers', 'lab', 'tools', 'posts'].map((item) => (
                  <button key={item} onClick={() => setActiveTab(item)} 
                    className={`px-4 py-1.5 text-xs font-mono uppercase tracking-widest transition-all duration-300 border border-transparent rounded-sm
                    ${activeTab === item ? 'text-blue-700 bg-blue-50 border-blue-100' : 'text-slate-500 hover:text-slate-900 hover:border-slate-200'}`}>
                    {item}
                  </button>
                ))}
              </div>
              <div className="hidden lg:flex items-center gap-4">
                 <button onClick={() => setActiveTab('community')} className="flex items-center gap-2 text-xs font-mono font-bold text-slate-900 hover:text-blue-700 transition-colors uppercase tracking-widest">
                    <span className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span> Connect
                 </button>
                 <div className="lg:hidden"><Icon name="menu" size={24}/></div>
              </div>
            </div>
          </nav>
        );

        // --- Article Reader ---
        const ArticleReader = ({ item, onBack }) => {
            const [content, setContent] = useState('');
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                setLoading(true);
                // 模拟数据抓取，如果在本地服务器环境下会尝试 fetch
                if (item.filePath) {
                     fetch(item.filePath)
                        .then(res => {
                             if(!res.ok) throw new Error("Load failed");
                             return res.text();
                        })
                        .then(text => {
                             setContent(marked.parse(text));
                             setLoading(false);
                        })
                        .catch(err => {
                            // Fallback mock content for preview
                            const mock = `# ${item.title}\n\n> **System Note:** Accessing archived reflection node.\n\nMathematics is the art of giving the same name to different things. \n\n### The Gradient Flow\n\nWhen we consider the loss landscape $$ \mathcal{L}(\theta) $$, we are essentially navigating a high-dimensional manifold. \n\n\`\`\`python\ndef train_step(model, data):\n    loss = model(data)\n    loss.backward()\n    optimizer.step()\n\`\`\`\n\nTrue intelligence might just be efficient compression.`;
                            setContent(marked.parse(mock));
                            setLoading(false);
                        });
                } else {
                     const mock = `# ${item.title}\n\nContent placeholder.`;
                     setContent(marked.parse(mock));
                     setLoading(false);
                }
            }, [item]);

            useEffect(() => {
                if (!loading && content) {
                    setTimeout(() => {
                        if (window.renderMathInElement) window.renderMathInElement(document.querySelector('.prose'), {
                            delimiters: [{left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}], throwOnError: false
                        });
                        if (window.Prism) window.Prism.highlightAll();
                    }, 100);
                }
            }, [content, loading]);

            return (
                <div className="max-w-3xl mx-auto px-6 py-12 fade-in min-h-screen">
                    <button onClick={onBack} className="text-xs font-mono text-slate-400 hover:text-slate-900 uppercase tracking-widest mb-12 flex items-center group">
                        <Icon name="chevron-left" size={14} className="mr-1 group-hover:-translate-x-1 transition-transform"/> Return
                    </button>
                    {loading ? <div className="font-mono text-xs text-slate-400 animate-pulse">DECRYPTING DATA STREAM...</div> : 
                        <div className="fade-in">
                            <div className="mb-10 pb-6 border-b border-slate-200">
                                <h1 className="text-3xl md:text-4xl font-serif font-bold text-slate-900 mb-4">{item.title}</h1>
                                <div className="flex gap-4 text-xs font-mono text-slate-400">
                                    <span>{item.date || "ARCHIVED"}</span>
                                    <span className="text-slate-300">/</span>
                                    <span className="text-blue-600">{item.category || "GENERAL"}</span>
                                </div>
                            </div>
                            <div className="prose prose-slate prose-headings:font-serif text-slate-600" dangerouslySetInnerHTML={{ __html: content }}></div>
                        </div>
                    }
                </div>
            )
        };

        const Hero = ({ setActiveTab }) => (
          <div className="max-w-6xl mx-auto px-6 py-24 md:py-32 fade-in min-h-[80vh] flex flex-col justify-center relative">
            <div className="absolute top-20 right-0 md:right-20 opacity-10 pointer-events-none">
                <svg width="300" height="300" viewBox="0 0 100 100" className="animate-spin-slow">
                    <circle cx="50" cy="50" r="40" stroke="currentColor" strokeWidth="0.5" fill="none" strokeDasharray="4 4" />
                    <circle cx="50" cy="50" r="30" stroke="currentColor" strokeWidth="0.5" fill="none" />
                </svg>
            </div>

            <div className="space-y-8 max-w-4xl z-10">
                <div className="inline-flex items-center gap-2 px-3 py-1 border border-slate-200 rounded-full bg-white/50 backdrop-blur-sm">
                    <span className="w-1.5 h-1.5 rounded-full bg-blue-600 animate-pulse"></span>
                    <span className="text-[10px] font-mono font-medium text-slate-500 uppercase tracking-widest">System Online</span>
                </div>
                
                <h1 className="text-5xl md:text-8xl font-bold text-slate-900 font-serif leading-none tracking-tight">
                    Math <span className="font-sans font-light text-slate-300">&</span><br/>
                    Intelligence.
                </h1>
                
                <p className="text-lg md:text-xl text-slate-600 font-light max-w-2xl leading-relaxed mt-8 border-l border-blue-500/30 pl-6">
                    Exploring the <span className="font-medium text-slate-900">geometry</span> of high-dimensional thinking.
                    <br/>A digital garden for idealism and rigorous logic.
                </p>

                <div className="flex flex-wrap gap-4 pt-8">
                    <button onClick={() => setActiveTab('library')} className="group relative px-6 py-3 bg-slate-900 text-white text-xs font-mono uppercase tracking-widest overflow-hidden hover:bg-blue-900 transition-colors">
                        <span className="relative z-10">Access Library</span>
                        <div className="absolute inset-0 h-full w-full scale-0 rounded transition-all duration-300 group-hover:scale-100 group-hover:bg-blue-900/50"></div>
                    </button>
                    <button onClick={() => setActiveTab('posts')} className="px-6 py-3 border border-slate-300 text-slate-600 text-xs font-mono uppercase tracking-widest hover:border-slate-900 hover:text-slate-900 transition-colors bg-white/50">
                        Read Logs
                    </button>
                </div>
            </div>
            
            <div className="absolute bottom-12 left-6 text-xs font-mono text-slate-300 flex gap-8">
                <div>COORD: 1.3521° N, 103.8198° E</div>
                <div>STATUS: RESEARCHING</div>
            </div>
          </div>
        );

        // --- Library: 档案卡片风格 ---
        const Library = ({ onRead, data }) => {
          const [selectedDiscipline, setSelectedDiscipline] = useState(null);
          
          if (!selectedDiscipline) return (
            <div className="max-w-6xl mx-auto px-6 py-16 fade-in min-h-screen">
                <div className="flex items-end justify-between mb-12 border-b border-slate-200 pb-4">
                    <h2 className="text-3xl font-serif font-bold text-slate-900">Knowledge Base</h2>
                    <span className="text-xs font-mono text-slate-400">INDEX_V2.0</span>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    {data.disciplines.map(d => (
                        <div key={d.id} onClick={() => setSelectedDiscipline(d.id)} className="tech-border tech-corner bg-white p-8 cursor-pointer group relative overflow-hidden">
                            <div className="absolute top-4 right-4 text-xs font-mono text-slate-300 group-hover:text-blue-500 transition-colors">{d.code}</div>
                            <div className="mb-6 text-slate-300 group-hover:text-slate-900 transition-colors">
                                <Icon name={d.icon} size={32} strokeWidth={1} />
                            </div>
                            <h3 className="text-xl font-bold text-slate-900 mb-2 font-serif">{d.title}</h3>
                            <p className="text-sm text-slate-500 font-light mb-8">{d.desc}</p>
                            <div className="w-full h-px bg-slate-100 group-hover:bg-slate-200 transition-colors mb-4"></div>
                            <div className="flex justify-between items-center text-xs font-mono text-slate-400 uppercase tracking-widest">
                                <span>{d.count}</span>
                                <Icon name="arrow-right" size={12} className="opacity-0 group-hover:opacity-100 -translate-x-2 group-hover:translate-x-0 transition-all"/>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
          );

          const courses = data.courses[selectedDiscipline] || []; 
          const currentInfo = data.disciplines.find(d => d.id === selectedDiscipline);

          return (
              <div className="max-w-5xl mx-auto px-6 py-16 fade-in min-h-screen">
                  <button onClick={() => setSelectedDiscipline(null)} className="flex items-center text-slate-400 hover:text-slate-900 mb-8 font-mono text-xs uppercase tracking-widest transition-colors group">
                    <Icon name="arrow-left" size={12} className="mr-2 group-hover:-translate-x-1 transition-transform"/> Back
                  </button>
                  <div className="mb-12">
                      <div className="text-xs font-mono text-blue-600 mb-2">{currentInfo.code}</div>
                      <h2 className="text-3xl font-serif font-bold text-slate-900">{currentInfo.title}</h2>
                  </div>
                  <div className="space-y-8">
                      {courses.map((course, idx) => (
                          <div key={idx} className="bg-white border border-slate-200 shadow-sm tech-corner">
                              <div className="bg-slate-50/50 px-6 py-4 border-b border-slate-100 flex justify-between items-center">
                                <h3 className="font-bold text-lg text-slate-800 font-serif">{course.title}</h3>
                                <div className="text-[10px] font-mono text-slate-400 border border-slate-200 px-2 py-0.5 rounded-sm">{course.code}</div>
                              </div>
                              <div className="p-6">
                                  {course.chapters.map((chapter, cIdx) => (
                                      <div key={cIdx} className="mb-6 last:mb-0">
                                          <div className="text-xs font-bold text-slate-900 uppercase tracking-widest mb-3 flex items-center gap-2">
                                              <span className="w-1 h-4 bg-slate-300"></span> {chapter.title}
                                          </div>
                                          <div className="grid gap-2 pl-4 border-l border-slate-100">
                                              {chapter.lessons.map(lesson => (
                                                  <div key={lesson.id} onClick={() => onRead(lesson)} className="flex items-center justify-between p-2 hover:bg-slate-50 cursor-pointer group transition-colors">
                                                      <div className="flex items-center gap-3">
                                                        <Icon name="file-code" size={14} className={lesson.highlight ? "text-blue-600" : "text-slate-300 group-hover:text-blue-600 transition-colors"}/>
                                                        <span className={`text-sm ${lesson.highlight ? "text-slate-900 font-medium" : "text-slate-600"} group-hover:text-slate-900 transition-colors`}>{lesson.title}</span>
                                                      </div>
                                                      {lesson.highlight && <span className="text-[9px] font-mono text-blue-600 border border-blue-100 px-1 rounded">CORE</span>}
                                                  </div>
                                              ))}
                                          </div>
                                      </div>
                                  ))}
                              </div>
                          </div>
                      ))}
                  </div>
              </div>
          );
        };

        // --- Papers: 文献索引风格 ---
        const Papers = ({ data, onRead }) => {
            const [selectedTheme, setSelectedTheme] = useState(null);
            
            if(!selectedTheme) return (
                <div className="max-w-5xl mx-auto px-6 py-16 fade-in min-h-screen">
                    <h2 className="text-3xl font-serif font-bold mb-12 text-slate-900 border-b border-slate-200 pb-4">Citation Index</h2>
                    <div className="space-y-4">
                        {data.themes.map(t => (
                            <div key={t.id} onClick={() => setSelectedTheme(t.id)} className="group flex items-center justify-between bg-white p-6 border border-slate-200 hover:border-slate-400 cursor-pointer transition-all">
                                <div className="flex items-center gap-6">
                                    <span className="font-mono text-2xl text-slate-200 font-bold group-hover:text-blue-100 transition-colors">0{data.themes.indexOf(t) + 1}</span>
                                    <div>
                                        <h3 className="text-xl font-bold group-hover:text-blue-900 font-serif transition-colors">{t.title}</h3>
                                        <p className="text-xs font-mono text-slate-400 mt-1">{t.desc}</p>
                                    </div>
                                </div>
                                <div className="text-xs font-mono text-slate-400 group-hover:text-slate-900 uppercase tracking-widest">
                                    {t.count} items <span className="ml-2">→</span>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
            
            const list = data.lists[selectedTheme] || [];
            return (
                <div className="max-w-4xl mx-auto px-6 py-16 fade-in min-h-screen">
                    <button onClick={() => setSelectedTheme(null)} className="flex items-center text-slate-400 hover:text-slate-900 mb-8 font-mono text-xs uppercase tracking-widest group"><Icon name="arrow-left" size={12} className="mr-2"/> Index</button>
                    <div className="space-y-4">
                        {list.length > 0 ? list.map((p, i) => (
                            <div key={i} onClick={() => onRead(p)} className="bg-white p-5 border-l-2 border-slate-200 hover:border-blue-600 pl-6 group cursor-pointer transition-all hover:bg-slate-50">
                                <h3 className="font-bold text-lg text-slate-800 group-hover:text-blue-900 font-serif">{p.title}</h3>
                                <p className="text-xs font-mono text-slate-500 mb-2 mt-1">{p.authors}</p>
                                <div className="flex gap-2 mt-3">
                                    {p.tags && p.tags.map(tag => <span key={tag} className="text-[10px] bg-white border border-slate-200 text-slate-500 px-2 py-0.5 rounded-sm">{tag}</span>)}
                                </div>
                            </div>
                        )) : <div className="text-slate-400 p-8 border border-dashed border-slate-300 text-center font-mono text-xs">NO ENTRIES FOUND</div>}
                    </div>
                </div>
            );
        };

        // --- Lab: 原型机风格 ---
        const Lab = ({ data }) => (
            <div className="max-w-6xl mx-auto px-6 py-16 fade-in min-h-screen">
                <div className="flex items-end justify-between mb-12 border-b border-slate-200 pb-4">
                    <h2 className="text-3xl font-serif font-bold text-slate-900">Experiments</h2>
                    <span className="text-xs font-mono text-slate-400">BUILD_STATUS: ACTIVE</span>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    {data && data.map(item => (
                        <div key={item.id} className="bg-white border border-slate-200 p-8 relative hover:shadow-lg hover:border-blue-300 transition-all group flex flex-col h-full">
                             {/* 装饰性状态灯 */}
                            <div className="absolute top-6 right-6 flex gap-1 items-center">
                                <span className={`text-[9px] font-mono uppercase mr-2 ${item.status === 'stable' ? 'text-green-600' : 'text-amber-500'}`}>{item.status}</span>
                                <div className={`w-2 h-2 rounded-full ${item.status === 'stable' ? 'bg-green-500' : 'bg-amber-400'}`}></div>
                            </div>
                            
                            <div className="font-mono text-[10px] text-blue-600 mb-4 border border-blue-100 bg-blue-50 w-fit px-2 py-0.5 rounded-sm">{item.language} :: {item.version}</div>
                            <h3 className="text-xl font-bold text-slate-900 mb-4 font-serif leading-tight">{item.title}</h3>
                            <p className="text-sm mb-8 text-slate-500 leading-relaxed font-light">{item.desc}</p>
                            
                            <a href={item.link} className="mt-auto inline-flex items-center gap-2 text-xs font-mono text-slate-900 border-b border-slate-900 pb-0.5 hover:text-blue-700 hover:border-blue-700 transition-colors w-fit">
                                <Icon name="terminal" size={14}/> Execute
                            </a>
                        </div>
                    ))}
                </div>
            </div>
        );

        // ⭐ Tools: 全新“实用工具网格”风格
        const Tools = ({ data }) => (
            <div className="max-w-6xl mx-auto px-6 py-16 fade-in min-h-screen">
                <div className="flex items-end justify-between mb-12 border-b border-slate-200 pb-4">
                    <h2 className="text-3xl font-serif font-bold text-slate-900">Toolbox</h2>
                    <span className="text-xs font-mono text-slate-400">UTILITY_GRID</span>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    {data && data.map(tool => (
                        <div key={tool.id} className="bg-white p-6 border border-slate-200 hover:border-blue-500 transition-colors group relative">
                            <div className="absolute top-0 left-0 w-full h-0.5 bg-blue-500 transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left"></div>
                            <div className="mb-4 text-slate-300 group-hover:text-blue-600 transition-colors">
                                <Icon name={tool.icon} size={24} strokeWidth={1.5} />
                            </div>
                            <h3 className="font-bold text-sm text-slate-900 font-serif mb-2">{tool.title}</h3>
                            <div className="text-[10px] font-mono text-slate-400 mb-3 uppercase">{tool.category}</div>
                            <p className="text-xs text-slate-500 leading-relaxed mb-4">{tool.desc}</p>
                            <a href={tool.link} target="_blank" className="text-[10px] font-mono text-slate-900 border border-slate-200 px-2 py-1 hover:bg-slate-900 hover:text-white transition-colors block text-center uppercase tracking-wider">
                                Access Tool
                            </a>
                        </div>
                    ))}
                </div>
            </div>
        );

        // --- Posts: 杂志科技风 ---
        const Posts = ({ data, onRead }) => {
            const featuredPost = data.find(p => p.featured) || data[0];
            const otherPosts = data.filter(p => p.id !== featuredPost.id);

            return (
                <div className="max-w-6xl mx-auto px-6 py-16 fade-in min-h-screen">
                     <div className="mb-16 flex flex-col md:flex-row justify-between items-end gap-6 border-b border-slate-200 pb-6">
                        <div>
                            <h2 className="text-3xl font-serif font-bold text-slate-900 mb-1">Thought Log</h2>
                            <p className="text-sm text-slate-500 font-light font-mono">Essays on Theory & Reality</p>
                        </div>
                     </div>

                    {/* Featured */}
                    {featuredPost && (
                        <div onClick={() => onRead(featuredPost)} className="group grid grid-cols-1 md:grid-cols-2 gap-0 border border-slate-200 bg-white mb-16 cursor-pointer hover:border-slate-400 transition-all shadow-sm hover:shadow-lg">
                            <div className="h-64 md:h-auto bg-slate-50 relative overflow-hidden flex items-center justify-center p-12">
                                <div className="absolute inset-0 opacity-10" style={{backgroundImage: 'radial-gradient(#94a3b8 1px, transparent 1px)', backgroundSize: '16px 16px'}}></div>
                                <Icon name="infinity" size={64} className="text-slate-400 group-hover:text-blue-900 group-hover:scale-110 transition-all duration-700" strokeWidth={0.5} />
                            </div>
                            <div className="p-10 flex flex-col justify-center">
                                <div className="text-xs font-mono text-blue-600 mb-4 uppercase tracking-widest">Featured Entry</div>
                                <h3 className="text-3xl font-serif font-bold text-slate-900 mb-6 leading-tight group-hover:text-blue-800 transition-colors">
                                    {featuredPost.title}
                                </h3>
                                <p className="text-slate-600 leading-relaxed mb-8 font-light text-sm">
                                    {featuredPost.desc}
                                </p>
                                <div className="mt-auto flex items-center justify-between text-xs font-mono text-slate-400">
                                    <span>{featuredPost.date}</span>
                                    <span className="text-slate-900 group-hover:translate-x-1 transition-transform">Read_File &gt;</span>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        {otherPosts.map(post => (
                            <div key={post.id} onClick={() => onRead(post)} className="group bg-white border border-slate-200 p-8 hover:border-blue-400 hover:shadow-lg transition-all cursor-pointer flex flex-col h-full">
                                <div className="flex justify-between items-start mb-6">
                                    <span className="text-[10px] font-mono text-slate-400 bg-slate-50 px-2 py-1 rounded-sm uppercase tracking-wider">{post.category}</span>
                                    <Icon name="arrow-up-right" size={16} className="text-slate-300 group-hover:text-blue-600 transition-colors" />
                                </div>
                                <h3 className="text-xl font-serif font-bold text-slate-800 mb-4 group-hover:text-blue-900 transition-colors">
                                    {post.title}
                                </h3>
                                <div className="mt-auto pt-6 border-t border-slate-50 flex justify-between text-[10px] font-mono text-slate-400 uppercase tracking-widest">
                                    <span>{post.date}</span>
                                    <span>{post.readTime}</span>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        // ⭐ Community: 信号广播风格 ---
        const Community = () => (
            <div className="max-w-4xl mx-auto px-6 py-24 fade-in min-h-screen flex flex-col items-center text-center">
                <div className="mb-8 relative flex items-center justify-center w-32 h-32">
                     {/* 雷达波纹效果 */}
                     <div className="absolute w-full h-full border border-blue-100 rounded-full radar-circle" style={{animationDelay: '0s'}}></div>
                     <div className="absolute w-full h-full border border-blue-100 rounded-full radar-circle" style={{animationDelay: '1s'}}></div>
                     <div className="bg-white p-4 rounded-full border border-slate-100 relative z-10 shadow-sm">
                        <Icon name="radio" size={40} strokeWidth={1} className="text-blue-900" />
                     </div>
                </div>
                
                <h2 className="text-4xl font-serif font-bold mb-6 text-slate-900">Signal Frequency</h2>
                
                <div className="max-w-xl text-lg text-slate-600 mb-12 font-light leading-relaxed">
                    <p className="mb-4">Searching for resonance in a noisy world.</p>
                    <p className="text-sm font-mono text-slate-400">Broadcasting to all idealists & long-term thinkers.</p>
                </div>
                
                <div className="w-full max-w-md bg-white p-10 border border-slate-200 relative overflow-hidden group hover:border-slate-900 transition-colors shadow-lg">
                    <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-purple-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500"></div>
                    <h3 className="text-xs font-mono font-bold text-slate-400 mb-4 uppercase tracking-widest">Encrypted Channel</h3>
                    <a href="mailto:mistatle@163.com" className="text-2xl font-serif font-bold text-slate-900 hover:text-blue-700 transition-colors border-b-2 border-transparent hover:border-blue-700">
                        mistatle@163.com
                    </a>
                </div>

                <div className="flex gap-8 mt-16 text-slate-400">
                    {['Bilibili', 'YouTube', 'GitHub', 'Zhihu'].map(social => (
                        <a key={social} href="#" className="text-xs font-mono uppercase tracking-widest hover:text-slate-900 transition-colors border-b border-transparent hover:border-slate-900 pb-1">{social}</a>
                    ))}
                </div>
            </div>
        );

        // --- 主程序 ---
        const App = () => {
          const [activeTab, setActiveTab] = useState('home');
          const [readingItem, setReadingItem] = useState(null); 
          const [db, setDb] = useState(DEFAULT_DB);
          
          // 尝试加载外部数据，失败则使用 DEFAULT_DB
          useEffect(() => {
            const loadData = async () => {
                const paths = {
                    library: 'data/library.json',
                    papers: 'data/papers.json',
                    lab: 'data/lab.json',
                    posts: 'data/posts.json',
                    tools: 'data/tools.json'
                };
                
                // 简单的合并逻辑：如果 fetch 成功就覆盖默认值
                const newData = { ...DEFAULT_DB };
                
                for (const [key, path] of Object.entries(paths)) {
                    try {
                        const res = await fetch(path);
                        if (res.ok) {
                            newData[key] = await res.json();
                        }
                    } catch (e) {
                        // console.log(`Using default for ${key}`);
                    }
                }
                setDb(newData);
            };
            loadData();
          }, []);

          const renderContent = () => {
            if (readingItem) return <ArticleReader item={readingItem} onBack={() => setReadingItem(null)} />;
            switch(activeTab) {
              case 'home': return <Hero setActiveTab={setActiveTab} />;
              case 'library': return <Library data={db.library} onRead={setReadingItem} />;
              case 'papers': return <Papers data={db.papers} onRead={setReadingItem} />; 
              case 'lab': return <Lab data={db.lab} />;
              case 'posts': return <Posts data={db.posts} onRead={setReadingItem} />;
              case 'tools': return <Tools data={db.tools} />;
              case 'community': return <Community />;
              default: return <Hero setActiveTab={setActiveTab} />;
            }
          };

          return (
            <div className="min-h-screen flex flex-col selection:bg-blue-100 selection:text-blue-900">
              <Navbar activeTab={activeTab} setActiveTab={(tab) => { setActiveTab(tab); setReadingItem(null); }} />
              <main className="flex-grow">{renderContent()}</main>
              <footer className="bg-white border-t border-slate-100 py-12 mt-0 text-center">
                <div className="text-[10px] font-mono text-slate-400 uppercase tracking-[0.3em] mb-2">MIStatlE System v2.0</div>
                <div className="text-[10px] text-slate-300 font-light">Optimized for Clarity & Truth</div>
              </footer>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
